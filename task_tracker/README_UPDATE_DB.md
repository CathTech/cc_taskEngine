# Скрипт обновления базы данных

## Описание

Скрипт `update_db.py` предназначен для обновления структуры базы данных приложения для управления задачами. Он проверяет наличие всех необходимых полей и таблиц, добавляя недостающие элементы без потери существующих данных.

## Функциональность

Скрипт выполняет следующие действия:

1. Проверяет существование всех необходимых колонок в таблице `tasks`:
   - `planned_start_time` - запланированное время начала выполнения задачи
   - `color` - цвет задачи для отображения в списке и календаре
   - `kanban_enabled` - галочка "Канбан" для показа или отображения задачи в списке канбан
   - `kanban_status` - статус задачи для канбан доски
   - `completed` - флаг завершения задачи
   - `completion_date` - дата завершения задачи
   - `show_in_calendar` - флаг отображения задачи в календаре

2. При необходимости добавляет недостающие колонки к существующей таблице

3. Проверяет существование таблицы `projects` и создает её при необходимости

4. Выводит информацию о произведенных изменениях

## Использование

```bash
cd /workspace/task_tracker
python update_db.py
```

## Безопасность

Скрипт безопасен для использования на существующей базе данных, так как:
- Не удаляет или изменяет существующие данные
- Только добавляет недостающие колонки
- Проверяет существование объектов перед созданием
- Обрабатывает ошибки корректно

## Поддерживаемый функционал

Скрипт обеспечивает поддержку всех новых возможностей приложения:
- Отображение задач с сортировкой от новых к старым
- Фильтрация выполненных задач
- Выбор цвета задачи
- Режим отображения в Канбане
- Статусы Канбан доски
- Запланированное время начала задачи
- Сортировка задач в календаре
- Создание задач через календарь
- Канбан доска с перетаскиванием задач